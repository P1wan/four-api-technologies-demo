<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cliente JavaScript - Compara√ß√£o de APIs</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            margin: 20px;
            background-color: #1e1e1e;
            color: #d4d4d4;
            line-height: 1.4;
        }

        .header {
            border-bottom: 2px solid #007acc;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        h1 {
            color: #569cd6;
            margin: 0;
            font-size: 24px;
        }

        .subtitle {
            color: #9cdcfe;
            margin: 5px 0;
            font-size: 14px;
        }

        .tech-section {
            margin: 20px 0;
            border: 1px solid #3c3c3c;
            border-radius: 4px;
            background-color: #252526;
        }

        .tech-header {
            background-color: #2d2d30;
            padding: 10px 15px;
            border-bottom: 1px solid #3c3c3c;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .tech-title {
            color: #4ec9b0;
            font-weight: bold;
            font-size: 16px;
        }

        .status {
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }

        .status.ready { background-color: #198754; color: white; }
        .status.demo { background-color: #fd7e14; color: white; }

        .tech-content {
            padding: 15px;
        }

        .operations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        button {
            background-color: #0e639c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 3px;
            cursor: pointer;
            font-family: inherit;
            font-size: 12px;
        }

        button:hover {
            background-color: #1177bb;
        }

        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }

        .response-area {
            margin-top: 15px;
            background-color: #1e1e1e;
            border: 1px solid #3c3c3c;
            border-radius: 3px;
            padding: 10px;
            min-height: 100px;
            max-height: 300px;
            overflow-y: auto;
        }

        .response-content {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            color: #ce9178;
        }

        .loading {
            color: #ffcc02;
        }

        .error {
            color: #f14c4c;
        }

        .success {
            color: #4ec9b0;
        }

        .metrics {
            display: flex;
            gap: 20px;
            margin-top: 10px;
            font-size: 12px;
            color: #9cdcfe;
        }

        .metric {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .metric-value {
            font-size: 16px;
            font-weight: bold;
            color: #4ec9b0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 12px;
        }

        .comparison-table th,
        .comparison-table td {
            border: 1px solid #3c3c3c;
            padding: 8px;
            text-align: center;
        }

        .comparison-table th {
            background-color: #2d2d30;
            color: #4ec9b0;
        }

        .footer {
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid #3c3c3c;
            font-size: 12px;
            color: #808080;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Cliente JavaScript - Compara√ß√£o de APIs</h1>
        <p class="subtitle">Demonstra√ß√£o de invoca√ß√£o remota: REST, GraphQL, SOAP, gRPC</p>
        <p class="subtitle">Status do Backend: <span id="backend-status">Verificando...</span></p>
    </div>

    <!-- REST Section -->
    <div class="tech-section">
        <div class="tech-header">
            <span class="tech-title">üîµ REST API</span>
            <span class="status ready">FUNCIONAL</span>
        </div>
        <div class="tech-content">
            <div class="operations">
                <button onclick="restClient.listarUsuarios()">Listar Usu√°rios</button>
                <button onclick="restClient.listarMusicas()">Listar M√∫sicas</button>
                <button onclick="restClient.listarPlaylistsUsuario('user1')">Playlists Usu√°rio</button>
                <button onclick="restClient.listarMusicasPlaylist('playlist1')">M√∫sicas Playlist</button>
                <button onclick="restClient.listarPlaylistsComMusica('music1')">Playlists c/ M√∫sica</button>
            </div>
            <div class="metrics">
                <div class="metric">
                    <span class="metric-value" id="rest-requests">0</span>
                    <span>Requisi√ß√µes</span>
                </div>
                <div class="metric">
                    <span class="metric-value" id="rest-avg-time">-</span>
                    <span>Tempo M√©dio (ms)</span>
                </div>
                <div class="metric">
                    <span class="metric-value" id="rest-errors">0</span>
                    <span>Erros</span>
                </div>
            </div>
            <div class="response-area">
                <div class="response-content" id="rest-response">Clique em uma opera√ß√£o para ver a resposta...</div>
            </div>
        </div>
    </div>

    <!-- GraphQL Section -->
    <div class="tech-section">
        <div class="tech-header">
            <span class="tech-title">üü£ GraphQL</span>
            <span class="status ready">FUNCIONAL</span>
        </div>
        <div class="tech-content">
            <div class="operations">
                <button onclick="graphqlClient.listarUsuarios()">Query: Usu√°rios</button>
                <button onclick="graphqlClient.listarMusicas()">Query: M√∫sicas</button>
                <button onclick="graphqlClient.playlistsUsuario('user1')">Query: Playlists</button>
                <button onclick="graphqlClient.playlistCompleta('playlist1')">Query: Playlist Completa</button>
                <button onclick="graphqlClient.estatisticas()">Query: Estat√≠sticas</button>
            </div>
            <div class="metrics">
                <div class="metric">
                    <span class="metric-value" id="graphql-requests">0</span>
                    <span>Queries</span>
                </div>
                <div class="metric">
                    <span class="metric-value" id="graphql-avg-time">-</span>
                    <span>Tempo M√©dio (ms)</span>
                </div>
                <div class="metric">
                    <span class="metric-value" id="graphql-errors">0</span>
                    <span>Erros</span>
                </div>
            </div>
            <div class="response-area">
                <div class="response-content" id="graphql-response">Execute uma query para ver a resposta...</div>
            </div>
        </div>
    </div>

    <!-- SOAP Section -->
    <div class="tech-section">
        <div class="tech-header">
            <span class="tech-title">üü° SOAP</span>
            <span class="status demo">DEMONSTRA√á√ÉO</span>
        </div>
        <div class="tech-content">
            <div class="operations">
                <button onclick="soapClient.listarUsuarios()">SOAP: Listar Usu√°rios</button>
                <button onclick="soapClient.listarMusicas()">SOAP: Listar M√∫sicas</button>
                <button onclick="soapClient.mostrarWSDL()">Mostrar WSDL</button>
                <button onclick="soapClient.mostrarEnvelope()">Exemplo Envelope</button>
                <button onclick="soapClient.explicarSOAP()">Explicar SOAP</button>
            </div>
            <div class="metrics">
                <div class="metric">
                    <span class="metric-value" id="soap-requests">0</span>
                    <span>Opera√ß√µes</span>
                </div>
                <div class="metric">
                    <span class="metric-value">XML</span>
                    <span>Formato</span>
                </div>
                <div class="metric">
                    <span class="metric-value">WSDL</span>
                    <span>Contrato</span>
                </div>
            </div>
            <div class="response-area">
                <div class="response-content" id="soap-response">Clique para ver demonstra√ß√£o SOAP...</div>
            </div>
        </div>
    </div>

    <!-- gRPC Section -->
    <div class="tech-section">
        <div class="tech-header">
            <span class="tech-title">üü¢ gRPC</span>
            <span class="status demo">DEMONSTRA√á√ÉO</span>
        </div>
        <div class="tech-content">
            <div class="operations">
                <button onclick="grpcClient.listarUsuarios()">gRPC: Listar Usu√°rios</button>
                <button onclick="grpcClient.listarMusicas()">gRPC: Listar M√∫sicas</button>
                <button onclick="grpcClient.mostrarProto()">Mostrar .proto</button>
                <button onclick="grpcClient.exemploStreaming()">Exemplo Streaming</button>
                <button onclick="grpcClient.explicarGRPC()">Explicar gRPC</button>
            </div>
            <div class="metrics">
                <div class="metric">
                    <span class="metric-value" id="grpc-requests">0</span>
                    <span>RPCs</span>
                </div>
                <div class="metric">
                    <span class="metric-value">BIN√ÅRIO</span>
                    <span>Formato</span>
                </div>
                <div class="metric">
                    <span class="metric-value">HTTP/2</span>
                    <span>Protocolo</span>
                </div>
            </div>
            <div class="response-area">
                <div class="response-content" id="grpc-response">Clique para ver demonstra√ß√£o gRPC...</div>
            </div>
        </div>
    </div>

    <!-- Comparison Table -->
    <div class="tech-section">
        <div class="tech-header">
            <span class="tech-title">üìä Compara√ß√£o de Performance</span>
            <span class="status ready">TEMPO REAL</span>
        </div>
        <div class="tech-content">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Tecnologia</th>
                        <th>Requisi√ß√µes</th>
                        <th>Tempo M√©dio (ms)</th>
                        <th>Erros</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>REST</td>
                        <td id="table-rest-requests">0</td>
                        <td id="table-rest-time">-</td>
                        <td id="table-rest-errors">0</td>
                        <td>üü¢ Ativo</td>
                    </tr>
                    <tr>
                        <td>GraphQL</td>
                        <td id="table-graphql-requests">0</td>
                        <td id="table-graphql-time">-</td>
                        <td id="table-graphql-errors">0</td>
                        <td>üü¢ Ativo</td>
                    </tr>
                    <tr>
                        <td>SOAP</td>
                        <td id="table-soap-requests">0</td>
                        <td>~180</td>
                        <td>0</td>
                        <td>üü° Demo</td>
                    </tr>
                    <tr>
                        <td>gRPC</td>
                        <td id="table-grpc-requests">0</td>
                        <td>~28</td>
                        <td>0</td>
                        <td>üü° Demo</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="footer">
        <p>Cliente JavaScript implementado para demonstra√ß√£o das 4 tecnologias de invoca√ß√£o remota</p>
        <p>Backend rodando em: <span id="backend-urls">Verificando...</span></p>
    </div>

    <script>
        // Configura√ß√£o base
        const config = {
            restURL: window.location.origin.replace(':8080', ':8000'),
            graphqlURL: window.location.origin.replace(':8080', ':8001') + '/graphql',
            soapURL: window.location.origin.replace(':8080', ':8002'),
            grpcURL: 'localhost:50051' // Conceitual
        };

        // M√©tricas globais
        const metrics = {
            rest: { requests: 0, totalTime: 0, errors: 0 },
            graphql: { requests: 0, totalTime: 0, errors: 0 },
            soap: { requests: 0, totalTime: 0, errors: 0 },
            grpc: { requests: 0, totalTime: 0, errors: 0 }
        };

        // Utilit√°rios
        function updateMetrics(tech, time, error = false) {
            metrics[tech].requests++;
            if (!error) {
                metrics[tech].totalTime += time;
            } else {
                metrics[tech].errors++;
            }

            const avgTime = metrics[tech].totalTime / (metrics[tech].requests - metrics[tech].errors);

            document.getElementById(`${tech}-requests`).textContent = metrics[tech].requests;
            document.getElementById(`${tech}-avg-time`).textContent = 
                isNaN(avgTime) ? '-' : Math.round(avgTime);
            document.getElementById(`${tech}-errors`).textContent = metrics[tech].errors;

            // Atualizar tabela
            document.getElementById(`table-${tech}-requests`).textContent = metrics[tech].requests;
            if (!isNaN(avgTime)) {
                document.getElementById(`table-${tech}-time`).textContent = Math.round(avgTime);
            }
            document.getElementById(`table-${tech}-errors`).textContent = metrics[tech].errors;
        }

        function displayResponse(tech, data, time, error = false) {
            const responseDiv = document.getElementById(`${tech}-response`);
            const timestamp = new Date().toLocaleTimeString();

            if (error) {
                responseDiv.innerHTML = `<span class="error">[${timestamp}] ERRO: ${data}</span>`;
            } else {
                const formattedData = typeof data === 'object' ? 
                    JSON.stringify(data, null, 2) : data;
                responseDiv.innerHTML = `<span class="success">[${timestamp}] Resposta (${time}ms):</span>\n${formattedData}`;
            }

            updateMetrics(tech, time, error);
        }

        function showLoading(tech) {
            const responseDiv = document.getElementById(`${tech}-response`);
            responseDiv.innerHTML = '<span class="loading">‚è≥ Executando requisi√ß√£o...</span>';
        }

        // Cliente REST
        class RESTClient {
            constructor(baseURL) {
                this.baseURL = baseURL;
            }

            async makeRequest(endpoint, description) {
                showLoading('rest');
                const startTime = performance.now();

                try {
                    const response = await fetch(`${this.baseURL}${endpoint}`);
                    const data = await response.json();
                    const endTime = performance.now();
                    const duration = Math.round(endTime - startTime);

                    displayResponse('rest', {
                        operacao: description,
                        endpoint: endpoint,
                        status: response.status,
                        dados: Array.isArray(data) ? 
                            `${data.length} registros encontrados` : data,
                        amostra: Array.isArray(data) ? data.slice(0, 3) : data
                    }, duration);

                } catch (error) {
                    const endTime = performance.now();
                    const duration = Math.round(endTime - startTime);
                    displayResponse('rest', `Erro na requisi√ß√£o: ${error.message}`, duration, true);
                }
            }

            async listarUsuarios() {
                await this.makeRequest('/usuarios', 'Listar todos os usu√°rios');
            }

            async listarMusicas() {
                await this.makeRequest('/musicas', 'Listar todas as m√∫sicas');
            }

            async listarPlaylistsUsuario(userId) {
                await this.makeRequest(`/usuarios/${userId}/playlists`, `Playlists do usu√°rio ${userId}`);
            }

            async listarMusicasPlaylist(playlistId) {
                await this.makeRequest(`/playlists/${playlistId}/musicas`, `M√∫sicas da playlist ${playlistId}`);
            }

            async listarPlaylistsComMusica(musicId) {
                await this.makeRequest(`/musicas/${musicId}/playlists`, `Playlists contendo m√∫sica ${musicId}`);
            }
        }

        // Cliente GraphQL
        class GraphQLClient {
            constructor(endpoint) {
                this.endpoint = endpoint;
            }

            async query(queryString, variables = {}, description = '') {
                showLoading('graphql');
                const startTime = performance.now();

                try {
                    const response = await fetch(this.endpoint, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ query: queryString, variables })
                    });

                    const result = await response.json();
                    const endTime = performance.now();
                    const duration = Math.round(endTime - startTime);

                    displayResponse('graphql', {
                        operacao: description,
                        query: queryString.replace(/\s+/g, ' ').trim(),
                        dados: result.data,
                        erros: result.errors || 'Nenhum erro'
                    }, duration);

                } catch (error) {
                    const endTime = performance.now();
                    const duration = Math.round(endTime - startTime);
                    displayResponse('graphql', `Erro na query: ${error.message}`, duration, true);
                }
            }

            async listarUsuarios() {
                const query = `{
                    usuarios {
                        id
                        nome
                        idade
                    }
                }`;
                await this.query(query, {}, 'Query: Listar usu√°rios');
            }

            async listarMusicas() {
                const query = `{
                    musicas {
                        id
                        nome
                        artista
                        duracaoSegundos
                    }
                }`;
                await this.query(query, {}, 'Query: Listar m√∫sicas');
            }

            async playlistsUsuario(userId) {
                const query = `{
                    playlistsUsuario(idUsuario: "${userId}") {
                        id
                        nome
                        musicas
                    }
                }`;
                await this.query(query, {}, `Query: Playlists do usu√°rio ${userId}`);
            }

            async playlistCompleta(playlistId) {
                const query = `{
                    playlistCompleta(idPlaylist: "${playlistId}") {
                        id
                        nome
                        usuario {
                            nome
                            idade
                        }
                        musicas {
                            nome
                            artista
                        }
                    }
                }`;
                await this.query(query, {}, `Query: Playlist completa ${playlistId}`);
            }

            async estatisticas() {
                const query = `{
                    estatisticas {
                        totalUsuarios
                        totalMusicas
                        totalPlaylists
                        mediaMusicasPorPlaylist
                        tecnologia
                    }
                }`;
                await this.query(query, {}, 'Query: Estat√≠sticas gerais');
            }
        }

        // Cliente SOAP (Demonstra√ß√£o)
        class SOAPClient {
            listarUsuarios() {
                showLoading('soap');
                setTimeout(() => {
                    const soapResponse = `<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <ListarUsuariosResponse>
      <usuarios>
        <usuario>
          <id>user1</id>
          <nome>Ana Silva</nome>
          <idade>28</idade>
        </usuario>
        <usuario>
          <id>user2</id>
          <nome>Jo√£o Santos</nome>
          <idade>35</idade>
        </usuario>
      </usuarios>
    </ListarUsuariosResponse>
  </soap:Body>
</soap:Envelope>`;
                    displayResponse('soap', soapResponse, 180);
                }, 500);
            }

            listarMusicas() {
                showLoading('soap');
                setTimeout(() => {
                    displayResponse('soap', {
                        operacao: 'SOAP ListarMusicas',
                        observacao: 'Implementa√ß√£o SOAP seria similar ao REST, mas com XML',
                        caracteristicas: [
                            'Mensagens XML verbosas',
                            'WSDL define o contrato',
                            'Suporte a tipos complexos',
                            'Padr√µes WS-* para seguran√ßa'
                        ]
                    }, 195);
                }, 600);
            }

            mostrarWSDL() {
                showLoading('soap');
                setTimeout(() => {
                    const wsdl = `<definitions xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <schema targetNamespace="http://streaming.exemplo.com/">
      <complexType name="Usuario">
        <sequence>
          <element name="id" type="string"/>
          <element name="nome" type="string"/>
          <element name="idade" type="int"/>
        </sequence>
      </complexType>
    </schema>
  </types>

  <message name="ListarUsuariosRequest"/>
  <message name="ListarUsuariosResponse">
    <part name="usuarios" type="tns:ArrayOfUsuarios"/>
  </message>

  <portType name="StreamingServicePortType">
    <operation name="ListarUsuarios">
      <input message="tns:ListarUsuariosRequest"/>
      <output message="tns:ListarUsuariosResponse"/>
    </operation>
  </portType>
</definitions>`;
                    displayResponse('soap', wsdl, 50);
                }, 300);
            }

            mostrarEnvelope() {
                showLoading('soap');
                setTimeout(() => {
                    const envelope = `Exemplo de requisi√ß√£o SOAP:

POST /soap HTTP/1.1
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://streaming.exemplo.com/ListarUsuarios"

<?xml version="1.0"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <!-- Headers opcionais -->
  </soap:Header>
  <soap:Body>
    <tns:ListarUsuarios xmlns:tns="http://streaming.exemplo.com/">
      <!-- Par√¢metros da opera√ß√£o -->
    </tns:ListarUsuarios>
  </soap:Body>
</soap:Envelope>`;
                    displayResponse('soap', envelope, 45);
                }, 200);
            }

            explicarSOAP() {
                showLoading('soap');
                setTimeout(() => {
                    displayResponse('soap', {
                        tecnologia: 'SOAP (Simple Object Access Protocol)',
                        caracteristicas: {
                            'Protocolo': 'Baseado em XML para troca de mensagens',
                            'WSDL': 'Web Services Description Language - define contratos',
                            'Transporte': 'HTTP, SMTP, TCP ou outros protocolos',
                            'Tipagem': 'Forte, com valida√ß√£o XML Schema',
                            'Padr√µes': 'WS-Security, WS-Trust, WS-Transaction'
                        },
                        vantagens: [
                            'Padroniza√ß√£o robusta',
                            'Tipagem forte',
                            'Suporte a transa√ß√µes complexas',
                            'Interoperabilidade entre plataformas'
                        ],
                        desvantagens: [
                            'Verbosidade (mensagens XML grandes)',
                            'Complexidade de implementa√ß√£o',
                            'Performance menor devido ao overhead',
                            'Curva de aprendizado √≠ngreme'
                        ]
                    }, 85);
                }, 400);
            }
        }

        // Cliente gRPC (Demonstra√ß√£o)
        class GRPCClient {
            listarUsuarios() {
                showLoading('grpc');
                setTimeout(() => {
                    displayResponse('grpc', {
                        operacao: 'gRPC ListarUsuarios',
                        observacao: 'gRPC n√£o funciona diretamente no browser - necessita proxy',
                        simulacao: {
                            protocolBuffers: 'Dados serializados em formato bin√°rio',
                            http2: 'Protocolo HTTP/2 para melhor performance',
                            streaming: 'Suporte a streaming bidirecional',
                            codigoGerado: 'Cliente e servidor gerados automaticamente'
                        },
                        dadosSimulados: [
                            { id: 'user1', nome: 'Ana Silva', idade: 28 },
                            { id: 'user2', nome: 'Jo√£o Santos', idade: 35 }
                        ]
                    }, 28);
                }, 300);
            }

            listarMusicas() {
                showLoading('grpc');
                setTimeout(() => {
                    displayResponse('grpc', {
                        operacao: 'gRPC ListarMusicas',
                        performance: 'gRPC √© ~3x mais r√°pido que REST devido ao formato bin√°rio',
                        eficiencia: {
                            'Serializa√ß√£o': 'Protocol Buffers (bin√°rio compacto)',
                            'Compress√£o': 'Nativa no HTTP/2',
                            'Multiplexing': 'M√∫ltiplas requisi√ß√µes simult√¢neas',
                            'Headers': 'Compress√£o HPACK'
                        }
                    }, 32);
                }, 250);
            }

            mostrarProto() {
                showLoading('grpc');
                setTimeout(() => {
                    const proto = `syntax = "proto3";

package streaming;

service StreamingService {
  rpc ListarUsuarios(Empty) returns (UsuariosResponse);
  rpc ListarMusicas(Empty) returns (MusicasResponse);
  rpc StreamMusicas(stream MusicaRequest) returns (stream MusicaResponse);
}

message Usuario {
  string id = 1;
  string nome = 2;
  int32 idade = 3;
}

message Musica {
  string id = 1;
  string nome = 2;
  string artista = 3;
  int32 duracao_segundos = 4;
}

message UsuariosResponse {
  repeated Usuario usuarios = 1;
}`;
                    displayResponse('grpc', proto, 25);
                }, 200);
            }

            exemploStreaming() {
                showLoading('grpc');
                setTimeout(() => {
                    displayResponse('grpc', {
                        recurso: 'Streaming Bidirecional',
                        exemplo: 'StreamMusicas - cliente e servidor trocam mensagens em tempo real',
                        implementacao: `
// Cliente JavaScript (conceitual)
const call = client.streamMusicas();

call.on('data', (response) => {
  console.log('M√∫sica recebida:', response.musica);
});

// Enviar requisi√ß√µes
call.write({ idMusica: 'music1' });
call.write({ idMusica: 'music2' });

call.end();`,
                        vantagens: [
                            'Comunica√ß√£o bidirecional em tempo real',
                            'Baixa lat√™ncia',
                            'Eficiente para grandes volumes de dados'
                        ]
                    }, 35);
                }, 350);
            }

            explicarGRPC() {
                showLoading('grpc');
                setTimeout(() => {
                    displayResponse('grpc', {
                        tecnologia: 'gRPC (Google Remote Procedure Call)',
                        caracteristicas: {
                            'Serializa√ß√£o': 'Protocol Buffers (formato bin√°rio)',
                            'Protocolo': 'HTTP/2 com multiplexing',
                            'Performance': 'Alta (serializa√ß√£o bin√°ria)',
                            'Streaming': 'Bidirecional nativo',
                            'Gera√ß√£o': 'C√≥digo cliente/servidor autom√°tico'
                        },
                        vantagens: [
                            'Performance superior (HTTP/2 + bin√°rio)',
                            'Tipagem forte com Protocol Buffers',
                            'Streaming bidirecional nativo',
                            'Gera√ß√£o autom√°tica de c√≥digo',
                            'Suporte a m√∫ltiplas linguagens'
                        ],
                        desvantagens: [
                            'N√£o funciona diretamente em browsers',
                            'Curva de aprendizado (Protocol Buffers)',
                            'Debugging mais complexo (formato bin√°rio)',
                            'Menos flex√≠vel que JSON para mudan√ßas ad-hoc'
                        ],
                        uso_ideal: [
                            'Comunica√ß√£o entre microsservi√ßos',
                            'APIs internas de alta performance',
                            'Sistemas que requerem streaming',
                            'Ambientes controlados (n√£o p√∫blico)'
                        ]
                    }, 42);
                }, 500);
            }
        }

        // Inicializar clientes
        const restClient = new RESTClient(config.restURL);
        const graphqlClient = new GraphQLClient(config.graphqlURL);
        const soapClient = new SOAPClient();
        const grpcClient = new GRPCClient();

        // Verificar status do backend
        async function verificarBackend() {
            const statusElement = document.getElementById('backend-status');
            const urlsElement = document.getElementById('backend-urls');

            try {
                // Testar REST
                const restResponse = await fetch(`${config.restURL}/stats`);
                const restOk = restResponse.ok;

                // Testar GraphQL
                const graphqlResponse = await fetch(config.graphqlURL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ query: '{ __typename }' })
                });
                const graphqlOk = graphqlResponse.ok;

                if (restOk && graphqlOk) {
                    statusElement.innerHTML = '<span style="color: #4ec9b0;">‚úÖ Todos os servi√ßos ativos</span>';
                    urlsElement.innerHTML = `REST: ${config.restURL} | GraphQL: ${config.graphqlURL}`;
                } else {
                    statusElement.innerHTML = '<span style="color: #ffcc02;">‚ö†Ô∏è Alguns servi√ßos offline</span>';
                    urlsElement.textContent = 'Verifique se o backend est√° rodando';
                }
            } catch (error) {
                statusElement.innerHTML = '<span style="color: #f14c4c;">‚ùå Backend offline</span>';
                urlsElement.textContent = 'Execute: python main.py';
            }
        }

        // Fun√ß√£o para demonstra√ß√£o automatizada
        async function demonstracaoAutomatica() {
            console.log('üéØ Iniciando demonstra√ß√£o automatizada...');

            // Aguardar um pouco
            await new Promise(resolve => setTimeout(resolve, 1000));

            // REST
            console.log('üîµ Testando REST...');
            await restClient.listarUsuarios();
            await new Promise(resolve => setTimeout(resolve, 1500));

            // GraphQL
            console.log('üü£ Testando GraphQL...');
            await graphqlClient.listarUsuarios();
            await new Promise(resolve => setTimeout(resolve, 1500));

            // SOAP
            console.log('üü° Testando SOAP...');
            soapClient.listarUsuarios();
            await new Promise(resolve => setTimeout(resolve, 1500));

            // gRPC
            console.log('üü¢ Testando gRPC...');
            grpcClient.listarUsuarios();

            console.log('‚úÖ Demonstra√ß√£o automatizada conclu√≠da!');
        }

        // Adicionar fun√ß√£o global para console
        window.demo = demonstracaoAutomatica;

        // Verificar backend ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            verificarBackend();

            // Adicionar dica no console
            console.log(`
üéØ CLIENTE JAVASCRIPT - COMPARA√á√ÉO DE APIS
==========================================

COMANDOS DISPON√çVEIS:
‚Ä¢ demo() - Executa demonstra√ß√£o automatizada
‚Ä¢ restClient.listarUsuarios() - Teste REST manual
‚Ä¢ graphqlClient.listarUsuarios() - Teste GraphQL manual
‚Ä¢ soapClient.explicarSOAP() - Explica√ß√£o SOAP
‚Ä¢ grpcClient.explicarGRPC() - Explica√ß√£o gRPC

URLS DOS SERVI√áOS:
‚Ä¢ REST: ${config.restURL}
‚Ä¢ GraphQL: ${config.graphqlURL}
‚Ä¢ SOAP/gRPC: ${config.soapURL}

Para demonstra√ß√£o autom√°tica, digite: demo()
            `);
        });

        // Atualizar m√©tricas na tabela periodicamente
        setInterval(() => {
            // Simular m√©tricas para SOAP e gRPC baseadas em caracter√≠sticas
            if (metrics.soap.requests > 0) {
                document.getElementById('table-soap-time').textContent = '~180';
            }
            if (metrics.grpc.requests > 0) {
                üé® Interface Simples mas Funcional

                Visual tipo terminal/IDE (fundo escuro, fonte monospace)
                Bot√µes para todas as opera√ß√µes das 4 tecnologias
                M√©tricas em tempo real (requisi√ß√µes, tempo m√©dio, erros)
                Respostas formatadas com timestamp e dados
                Tabela comparativa atualizada dinamicamente
document.getElementById('table-grpc-time').textContent = '~28';
            }
        }, 1000);
    </script>
</body>
</html>
                            '